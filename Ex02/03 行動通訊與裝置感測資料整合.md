# 行動通訊與裝置感測資料整合  
資料整合的必要性及一些案例

## 為什麼需要結合行動通訊與感測資料？  
核心價值：

- 即時性：隨時隨地傳送感測數據
- 移動性：在移動中持續收集資料
- 情境感知：結合位置與環境資訊
- 遠端監控：即時掌握裝置狀態  

技術基礎：
- 行動網路 (4G/5G) 提供連線能力
- 感測器收集實體世界數據
- JSON 作為**標準**資料交換格式  

## 案例一 - 地圖定位服務
GPS定位資料結構：  
```json
{
  "locationData": {
    "deviceId": "mobile-001",
    "timestamp": "2024-01-15T10:30:00Z",
    "coordinates": {
      "latitude": 25.0345,  //緯度
      "longitude": 121.5647,  //經度
      "accuracy": 5.2 //meters
    },
    "movement": {
      "speed": 12.5,
      "heading": 45.2,
      "altitude": 25.0
    },
    "networkInfo": {
      "signalStrength": -75,
      "networkType": "5G"
    }
  }
}
```
以下是這個 GPS 定位資料結構中每一個欄位的詳細說明：

---

### 🔹 `locationData` 物件

這是整個定位資料的主體容器。

#### `deviceId`: `"mobile-001"`
- **說明**: 裝置識別碼
- **用途**: 用來區分不同的設備（如手機、車載裝置等）
- **格式**: 字串，通常為設備序列號或自定義 ID

#### `timestamp`: `"2024-01-15T10:30:00Z"`
- **說明**: 定位時間戳
- **格式**: ISO 8601 標準時間格式
- **解讀**: 2024年1月15日 10:30:00 UTC 時間
- **用途**: 記錄此筆定位資料的取得時間，用於追蹤移動軌跡或時間序列分析

---

### `coordinates` 物件（座標資訊）

```json
"coordinates": {
  "latitude": 25.0345,
  "longitude": 121.5647,
  "accuracy": 5.2
}
```

#### `latitude`: `25.0345`
- **說明**: 緯度
- **單位**: 度（°）
- **範圍**: -90 到 +90
- **正負意義**: 
  - 正值：北緯（N）
  - 負值：南緯（S）
- **範例**: 25.0345 ≈ 台灣台北市附近

#### `longitude`: `121.5647`
- **說明**: 經度
- **單位**: 度（°）
- **範圍**: -180 到 +180
- **正負意義**:
  - 正值：東經（E）
  - 負值：西經（W）
- **範例**: 121.5647 ≈ 台灣台北市附近

#### `accuracy`: `5.2`
- **說明**: 定位精確度（誤差半徑）
- **單位**: 公尺（meters）
- **解讀**: 實際位置有高機率落在以該座標為中心、半徑 5.2 公尺的範圍內
- **數值意義**:
  - 越小越精確（< 10m = 優秀，> 100m = 粗略）
  - 受 GPS 衛星數量、建築物遮蔽、天氣等因素影響

---

### `movement` 物件（移動狀態）
```json
"movement": {
  "speed": 12.5,
  "heading": 45.2,
  "altitude": 25.0
}
```

#### `speed`: `12.5`
- **說明**: 地面速度（Ground Speed）
- **單位**: 公尺/秒（m/s）或公里/小時（km/h），需根據系統確認
  - 若為 m/s：12.5 m/s ≈ 45 km/h
  - 若為 km/h：直接為 45 km/h
- **用途**: 判斷是否在移動、計算預估到達時間等
- **特殊值**: 0 = 靜止

#### `heading`: `45.2`
- **說明**: 移動方向（方位角）
- **單位**: 度（°）
- **範圍**: 0.0 到 360.0
- **基準**: 正北為 0°，順時針計算
  - 0° = 正北
  - 90° = 正東
  - 180° = 正南
  - 270° = 正西
- `45.2°` ≈ 東北偏北方向
- **注意**: 僅在移動時有意義（speed > 0）

#### `altitude`: `25.0`
- **說明**: 海拔高度
- **單位**: 公尺（meters）
- **基準**: 通常以 WGS84 橢球體或平均海平面為基準
- **用途**: 三維定位、地形分析、飛行器應用等
- **誤差**: GPS 高度誤差通常比平面位置誤差大

---

### `networkInfo` 物件（網路資訊）
```json
"networkInfo": {
  "signalStrength": -75,
  "networkType": "5G"
}
```
#### `signalStrength`: `-75`
- **說明**: 網路訊號強度
- **單位**: dBm（分貝毫瓦）
- **常見範圍**: 
  - -50 dBm = 極強訊號
  - -75 dBm = 中等訊號 ✅
  - -90 dBm = 較弱訊號
  - -110 dBm = 極弱訊號
- **用途**: 判斷通訊品質、定位穩定性

#### `networkType`: `"5G"`
- **說明**: 網路類型
- **可能值**:
  - `"5G"` = 第五代行動網路（高速、低延遲）
  - `"4G"` / `"LTE"` = 第四代
  - `"3G"` = 第三代
  - `"WIFI"` = 無線區域網路
  - `"NONE"` = 無網路
- **用途**: 
  - 影響定位速度與精度（如 A-GPS 需要網路協助）
  - 數據傳輸品質評估

---

### 總結應用場景

這個資料結構適合用於：
- 實時車隊管理
- 外送員追蹤
- 戶外活動紀錄器
- 智慧交通系統
- 緊急救援定位

每一筆資料都能提供完整的「位置 + 時間 + 移動狀態 + 環境條件」資訊，適合做即時監控與軌跡分析

## 經度及緯度補充  
**經度**   
定義：連接南北兩極的大圓線上的半圓弧。  
基準：本初子午線（位於英國格林威治）為 $(0^{\circ })$。  
方向：分為東經和西經，東經 $(180^{\circ })$ 和西經 $(180^{\circ })$ 相同，並構成國際換日線。  
計算：地球自轉一圈 $(360^{\circ })$ 需要 $24$ 小時，因此每小時地球會向東自轉 $(15^{\circ })$。     

**緯度**  
定義：以地表某一點到地心的直線與赤道的夾角來表示。  
基準：赤道為 $(0^{\circ })$。  
方向：分為北緯和南緯，從赤道到北極為北緯 $(90^{\circ })$，到南極為南緯 $(90^{\circ })$。  
特殊緯線：南北回歸線約在緯度 $(23.5^{\circ })$。  

**台灣的經緯度**  
台灣本島：約在東經 $(120^{\circ }$)$ E 至 $(122^{\circ })$ E，北緯 $(22^{\circ }) N$ 至 $(25^{\circ }) N$ 之間。  
台灣的時區：屬於 UTC+8 時區。   

## 案例二 - 運動健康紀錄  
運動感測資料整合：  
```json
{
  "fitnessSession": {
    "sessionId": "fit-20240115-1030",
    "userId": "user123",
    "activityType": "running",
    "startTime": "2024-01-15T10:00:00Z",
    "duration": 1800,
    "sensorData": {
      "heartRate": {
        "current": 125,
        "average": 118,
        "max": 145,
        "unit": "bpm"
      },
      "steps": 4250,
      "calories": 320,
      "gpsPath": [
        {"lat": 25.0330, "lng": 121.5650, "time": "10:00:05"},
        {"lat": 25.0335, "lng": 121.5655, "time": "10:05:30"}
      ],
      "deviceMetrics": {
        "batteryLevel": 65,
        "connectionStatus": "stable"
      }
    }
  }
}
```
以下是這個 `fitnessSession` 健身運動紀錄資料結構中每一個欄位的詳細說明：

```json
{
  "fitnessSession": {
    "sessionId": "fit-20240115-1030",
    "userId": "user123",
    "activityType": "running",
    "startTime": "2024-01-15T10:00:00Z",
    "duration": 1800,
    "sensorData": {
      "heartRate": {
        "current": 125,
        "average": 118,
        "max": 145,
        "unit": "bpm"
      },
      "steps": 4250,
      "calories": 320,
      "gpsPath": [
        {"lat": 25.0330, "lng": 121.5650, "time": "10:00:05"},
        {"lat": 25.0335, "lng": 121.5655, "time": "10:05:30"}
      ],
      "deviceMetrics": {
        "batteryLevel": 65,
        "connectionStatus": "stable"
      }
    }
  }
}
```

---

## `fitnessSession` 主物件  

整個健身運動會話的容器。

### `sessionId`: `"fit-20240115-1030"`  
- **說明**: 運動紀錄的唯一識別碼
- **命名規則**: 通常包含類型 + 日期 + 時間
  - `fit` = fitness
  - `20240115` = 2024年1月15日
  - `1030` = 開始時間 10:30
- **用途**: 資料庫儲存、查詢、同步時的唯一索引

### `userId`: `"user123"`  
- **說明**: 使用者識別碼
- **用途**: 關聯該使用者的所有運動紀錄
- **注意**: 應配合隱私保護機制（如不得使用真實姓名或身分證號）

### `activityType`: `"running"`  
- **說明**: 運動類型
- **常見值**:
  - `"running"` / `"jogging"` = 跑步
  - `"walking"` = 健走
  - `"cycling"` = 騎自行車
  - `"swimming"` = 游泳
  - `"strength_training"` = 重量訓練
  - `"yoga"` = 瑜珈
- **用途**: 數據分析、熱量計算公式選擇、介面顯示圖示

### `startTime`: `"2024-01-15T10:00:00Z"`  
- **說明**: 運動開始時間
- **格式**: ISO 8601 標準時間格式
- **解讀**: 2024年1月15日 10:00:00 UTC 時間
- **用途**: 計算運動時間軸、歷史紀錄排序

### `duration`: `1800`  
- **說明**: 運動持續時間
- **單位**: 秒（seconds）
- **換算**: 
  - 1800 秒 = **30 分鐘**
  - 公式：秒 ÷ 60 = 分鐘
- **用途**: 計算配速、分析運動強度

---

## `sensorData` 感測器資料  

所有由穿戴裝置或手機收集的生理與環境數據。

---

### `heartRate` 物件（心率資料）  

#### `current`: `125`  
- **說明**: 當前心率（最後一筆紀錄）
- **單位**: bpm（beats per minute，每分鐘心跳次數）
- **意義**: 反映此刻的運動強度或恢復狀態

#### `average`: `118`  
- **說明**: 整段運動的平均心率
- **單位**: bpm
- **用途**: 判斷整體運動強度
  - 中等強度：約 50–70% 最大心率
  - 高強度：約 70–85% 最大心率

#### `max`: `145`  
- **說明**: 運動期間的最高心率
- **單位**: bpm
- **用途**: 
  - 確認是否達到目標訓練區間
  - 安全監控（避免過度訓練）

#### `unit`: `"bpm"`  
- **說明**: 單位標示
- **全名**: beats per minute
- **用途**: 介面顯示單位、資料交換標準化

---

### 其他活動指標  

#### `steps`: `4250`  
- **說明**: 總步數
- **單位**: 步
- **用途**: 
  - 評估活動量（世界衛生組織建議每日 10,000 步）
  - 推算行走距離（依步幅估算）

#### `calories`: `320`  
- **說明**: 消耗的熱量
- **單位**: 千卡（kcal）
- **計算方式**: 依性別、年齡、體重、心率、活動類型估算
- **注意**: 為估算值，非精確測量

---

### `gpsPath` 陣列（GPS 軌跡）  

紀錄運動過程中的位置點序列，用於繪製路線圖。

每一筆資料包含：

```json
{"lat": 25.0330, "lng": 121.5650, "time": "10:00:05"}
```

#### `lat`: `25.0330`  
- **說明**: 緯度（latitude）
- **單位**: 度（°）
- **正負意義**: 正值 = 北緯

#### `lng`: `121.5650`  
- **說明**: 經度（longitude）
- **單位**: 度（°）
- **正負意義**: 正值 = 東經

#### `time`: `"10:00:05"`  
- **說明**: 相對於開始時間的經過時間或當地時間
- **格式**: 時:分:秒
- **解讀**: 可能是「開始後 5 秒」或「上午 10:00:05」
- **用途**: 計算配速變化、停頓點檢測

> 提示：若要計算完整時間軸，可結合 `startTime` 與此相對時間

---

### `deviceMetrics` 物件（裝置狀態）

紀錄裝置本身的運作狀況。

#### `batteryLevel`: `65`
- **說明**: 電池剩餘電量
- **單位**: 百分比（%）
- **解讀**: 還有 65% 電量
- **用途**: 
  - 判斷是否會中斷紀錄  
  - 使用者行為分析（低電量時是否提前結束運動）  

#### `connectionStatus`: `"stable"`  
- **說明**: 裝置連線狀態  
- **可能值**:  
  - `"stable"` = 穩定   
  - `"weak"` = 訊號微弱   
  - `"disconnected"` = 中斷   
- **用途**: 
  - 數據同步品質評估
  - 定位與即時傳輸的可靠性判斷

---

## 總結應用場景  

這個資料結構適合用於：  

- 運動 App（如跑步紀錄器）  
- 穿戴裝置（智慧手錶、運動手環）  
- 健身追蹤平台  
- 健康管理系統  
- AI 運動教練分析  

---

## 延伸應用  

| 功能 | 可計算項目 |
|------|------------|
| 配速計算 | 距離 ÷ 時間（需從 GPS 點計算距離） |
| 心率區間分析 | 依最大心率（220 - 年齡）計算訓練區間 |
| 運動強度評估 | 平均心率 + 消耗熱量 + 持續時間 |
| 軌跡地圖 | 使用 `gpsPath` 繪製 Google Maps 路線 |
| 狀態提醒 | 電量 < 20% 時建議充電 |

---

這個結構設計，包含「使用者、時間、活動、生理、位置、裝置」六大面向，適合做全面性的運動與健康分析


## 案例三 - 環境感測報告  
多感測器資料收集：  
```json
{
  "environmentalReport": {
    "stationId": "sensor-station-01",
    "location": "台北市信義區",
    "timestamp": "2024-01-15T10:15:00Z",
    "readings": {
      "temperature": {
        "value": 26.5,
        "unit": "celsius"
      },
      "humidity": { //濕度
        "value": 65,
        "unit": "percent"
      },
      "airQuality": {
        "pm2_5": 35,  //µg/m³（細懸浮微粒）
        "pm10": 42, //µg/m³（可吸入微粒）
        "aqi": 52 //Air Quality Index（空氣品質指標）
      },
      "noiseLevel": {
        "value": 45.2,
        "unit": "decibel"
      }
    },
    "deviceStatus": {
      "battery": 78,
      "signalQuality": "excellent",
      "lastMaintenance": "2024-01-01"
    }
  }
}
```
以下是這個 `environmentalReport` 環境監測報告資料結構中每一個欄位的詳細說明：  

---

## `environmentalReport` 主物件  

整個環境監測報告的容器，用於城市物聯網、智慧環境管理等應用。

---

### `stationId`: `"sensor-station-01"`  
- **說明**: 監測站台識別碼
- **用途**: 區分不同監測站台，便於資料管理與故障排查
- **命名規則**: 通常包含類型 + 編號（如 `sensor-station-01`, `aqi-001`）
- **應用**: 數據庫索引、地圖標示、歷史比對

### `location`: `"台北市信義區"`  
- **說明**: 監測站台的安裝地點
- **格式**: 人類可讀的文字描述（非座標）
- **用途**: 
  - 公眾查詢時的地理位置標示
  - 行政區域名分析（如比較各區空氣品質）
- **補充**: 可搭配 GPS 座標使用更精確定位

### `timestamp`: `"2024-01-15T10:15:00Z"`  
- **說明**: 數據收集時間
- **格式**: ISO 8601 標準時間格式
- **解讀**: 2024年1月15日 10:15:00 UTC 時間
- **用途**: 
  - 時間序列分析
  - 即時警報判斷
  - 與其他站台同步比對

---

## `readings` 物件（環境感測數據）  

所有環境參數的測量結果。

---

### `temperature` 物件（溫度）  

#### `value`: `26.5`  
- **說明**: 環境溫度測量值
- **單位**: 攝氏度（°C）
- **解讀**: 26.5°C ≈ 温暖天氣，接近人體舒適範圍
- **應用**: 
  - 熱指標計算（如濕球溫度）
  - 氣象預報校正
  - 公共健康警示（高溫警報）

#### `unit`: `"celsius"`  
- **說明**: 單位標示
- **國際標準**: °C（攝氏度）
- **其他格式**: `"fahrenheit"`（華氏度）用於美國等地

---

### `humidity` 物件（濕度）  

#### `value`: `65`  
- **說明**: 相對濕度（Relative Humidity）
- **單位**: 百分比（%）
- **解讀**: 
  - 65% = 中等偏高濕度
  - 舒適範圍：40–60%
  - >70% 可能感覺悶熱
- **影響**: 
  - 影響體感溫度
  - 高濕促進黴菌生長
  - 影響電子設備運作

#### `unit`: `"percent"`  
- **說明**: 百分比單位標示

---

### `airQuality` 物件（空氣品質）  

#### `pm2_5`: `35`  
- **說明**: 細懸浮微粒濃度
- **單位**: µg/m³（微克每立方公尺）
- **粒徑**: 小於或等於 2.5 微米
- **健康影響**: 
  - 可穿透肺泡進入血液
  - 長期暴露增加心血管疾病風險
- **標準參考**（WHO）:
  - 年平均值建議 < 5 µg/m³
  - 日平均值建議 < 15 µg/m³
  - `35 µg/m³` = 超過標準，需關注

#### `pm10`: `42`  
- **說明**: 可吸入微粒濃度
- **單位**: µg/m³
- **粒徑**: 小於或等於 10 微米
- **來源**: 沙塵、花粉、燃燒顆粒等
- **標準參考**（WHO）:
  - 日平均建議 < 45 µg/m³
  - `42 µg/m³` = 接近標準上限

#### `aqi`: `52`  
- **說明**: 空氣品質指標（Air Quality Index）
- **計算方式**: 由多種污染物濃度轉換而成的單一指標
- **國際常見標準**（如美國 EPA）:
  - 0–50: 良好（Good）
  - 51–100: 中等（Moderate）
  - 101–150: 對敏感族群不健康 
- **解讀**: `52` = 屬於「中等」等級，大多數人無明顯影響
- **用途**: 公眾警示、健康建議發布

---

### `noiseLevel` 物件（噪音）  

#### `value`: `45.2`  
- **說明**: 環境噪音強度
- **單位**: 分貝（dB，decibel）
- **解讀**:
  - 45.2 dB ≈ 安靜辦公室或住宅區背景音
  - 正常對話約 60 dB
  - >70 dB 長期暴露可能影響聽力與睡眠
- **應用**:
  - 都市規劃評估
  - 工地噪音管制
  - 居住品質指標

#### `unit`: `"decibel"`  
- **說明**: 分貝單位標示
- **符號**: dB

---

## `deviceStatus` 物件（裝置狀態）  

監測站台本身的運作狀況，確保數據可靠性。

---

### `battery`: `78`  
- **說明**: 電力剩餘百分比
- **單位**: 百分比（%）
- **解讀**: 還有 78% 電量
- **用途**:
  - 判斷是否需要更換電池或充電
  - 預測資料中斷風險
- **警戒值**: <20% 應安排維護

### `signalQuality`: `"excellent"`
- **說明**: 網路訊號品質
- **可能值**:  
  - `"excellent"` = 極佳 
  - `"good"` = 良好 
  - `"fair"` = 普通 
  - `"poor"` = 差 
- **用途**:  
  - 判斷數據傳輸穩定性
  - 影響即時監控可靠性
- **技術基礎**: 4G/5G/Wi-Fi/LoRa 等通訊協定  

### `lastMaintenance`: `"2024-01-01"`  
- **說明**: 上次保養日期
- **格式**: YYYY-MM-DD（年-月-日）
- **解讀**: 2024年1月1日進行過維護
- **用途**:
  - 追蹤設備保養週期
  - 判斷感測器準確性（髒污或老化會影響讀數）
  - 安排下次維護排程（通常每3–6個月一次）

---

## 總結應用場景  

這個環境監測資料結構適用於：  

| 應用領域 | 使用方式 |
|---------|----------|
| 智慧城市 | 即時環境監控、都市熱點分析 |
| 環保單位 | 空污稽查、噪音管制、法規遵循 |
| 公共衛生 | 高溫警報、空氣品質健康提醒 |
| 數據分析 | 時間序列預測、異常偵測 |
| 民眾服務 | App 即時查詢、Push 警報 |

---

## 延伸功能建議  

| 功能 | 可計算項目 |
|------|------------|
| 體感溫度 | 溫度 + 濕度 → 計算濕球溫度或酷熱指數 |
| 空氣品質趨勢 | 多筆 `aqi` → 繪製時間變化圖 |
| 設備預警 | `battery` < 20% → 自動派工單 |
| 區域比較 | 多站台 `pm2_5` → 繪製污染熱力圖 |
| 即時警報 | `noiseLevel` > 70 dB → 社區通知 |

---

這個結構設計完整，涵蓋「位置、時間、環境參數、裝置狀態」四大面向，適合做為城市環境監測系統的標準格式


### 補充  
以美國 EPA 的 AQI 標準為例：
- 0–50：良好（Good）
- 51–100：中等（Moderate）
- 101–150：對敏感族群不健康（Unhealthy for Sensitive Groups）
- 151–200：對所有族群不健康（Unhealthy）
- 201–300：非常不健康（Very Unhealthy）
- 300+：危害（Hazardous）

## JSON在行動感測的優勢與實作
JSON格式優勢：
- 輕量級：節省頻寬與電力
- 可讀性：易於除錯與開發
- 擴充性：容易新增感測器資料
- 標準化：跨平台相容  

完整行動感測系統範例：  
```json
{
  "mobileSensorPackage": {
    "metadata": {
      "deviceId": "smartphone-xyz123",
      "appVersion": "2.1.0",
      "os": "Android 14",
      "transmissionId": "tx-001"
    },
    "sensorFusion": {
      "motion": {
        "accelerometer": {"x": 0.12, "y": -0.05, "z": 9.81}, //加速度
        "gyroscope": {"x": 1.2, "y": 0.8, "z": -0.3},  //陀螺儀
        "magnetometer": {"x": 25.1, "y": -12.3, "z": 45.6}  //磁力計
      },
      "position": {
        "gps": {"lat": 25.0330, "lng": 121.5650, "accuracy": 3.2},
        "wifiPositioning": {"confidence": 0.85},
        "cellTowerTriangulation": {"towers": 4} //基地台塔三角測量
      },
      "environment": {
        "ambientLight": 250,  //環境光線感測, 周圍環境的光照強度, 勒克斯 (lux)
        "proximity": "near",  //接近感測, 裝置與附近物體的距離
        "barometer": 1013.25  //氣壓計, 感測大氣壓力, 百帕 (hPa) 或 毫巴 (mbar)
      }
    },
    "networkInfo": {
      "connectionType": "5G",
      "signalStrength": -68,
      "dataUsage": {"sessionKB": 125, "totalMB": 2450}
    },
    "timestamp": "2024-01-15T10:30:15.123Z"
  }
}
```


##  實際應用練習
設計一個智慧騎乘系統的JSON結構：
- 位置追蹤
- 速度與距離
- 環境感測
- 裝置狀態  

```json
{
  "smartRide": {
    "rideId": "ride-20240115-1030",
    "cyclistId": "cyclist456",
    "realTimeData": {
      "position": {"lat": 25.035, "lng": 121.567, "speed": 15.2},
      "metrics": {"distance": 8.5, "calories": 210, "elevationGain": 45},
      "environment": {"temperature": 28, "windSpeed": 12, "roadCondition": "dry"}
    },
    "safetyAlerts": ["highSpeed", "lowBattery"],
    "deviceStatus": {"battery": 25, "gpsSignal": "strong"}
  }
}
```

## 總結
即時傳輸：行動網路實現即時資料傳送
多源整合：結合多種感測器資料
標準格式：JSON統一資料結構
情境感知：位置+環境+狀態完整情境
